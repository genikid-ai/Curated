<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>注音結合韻學習遊戲</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap');
        body {
            font-family: 'Noto Sans TC', sans-serif;
            box-sizing: border-box;
        }
        .fade-in {
            animation: fadeIn 0.4s ease-out;
        }
        @keyframes fadeIn {
            0% { opacity: 0; transform: translateY(10px); }
            100% { opacity: 1; transform: translateY(0); }
        }
        .image-container {
            transition: all 0.3s ease-in-out;
        }
        .pulse-button {
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
    </style>
</head>
<body class="bg-gradient-to-br from-green-50 via-blue-50 to-yellow-50 min-h-screen">
    
    <!-- [新增] 全螢幕按鈕 -->
    <button id="fullscreen-btn" class="fixed top-4 right-4 z-50 p-2 rounded-lg text-slate-500 hover:text-slate-800 hover:bg-slate-100 transition-all" title="切換全螢幕">
        <!-- 展開圖示 -->
        <svg id="icon-expand" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
          <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 3.75v4.5m0-4.5h4.5m-4.5 0L9 9M3.75 20.25v-4.5m0 4.5h4.5m-4.5 0L9 15M20.25 3.75v4.5m0-4.5h-4.5m4.5 0L15 9m5.25 11.25v-4.5m0 4.5h-4.5m4.5 0L15 15" />
        </svg>
        <!-- 收合圖示 (預設隱藏) -->
        <svg id="icon-contract" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 hidden">
          <path stroke-linecap="round" stroke-linejoin="round" d="M9 9V3.75m0 5.25h5.25M9 9L3.75 3.75M9 15v5.25m0-5.25h5.25M9 15l-5.25 5.25m5.25-5.25L3.75 9m5.25 0L15 3.75m-5.25 5.25L15 15m0 0V9.75m0 5.25h-5.25m5.25 0l5.25 5.25M15 9l5.25-5.25m-5.25 5.25L20.25 9" />
        </svg>
    </button>

    <div class="container mx-auto px-4 py-8">
        <!-- 標題 -->
        <div class="text-center mb-8">
            <h1 class="text-4xl font-bold text-emerald-700 mb-2">🎵 聲調變變變</h1>
            <p class="text-lg text-slate-600">結合韻闖關遊戲，依序點選注音「ㄧ」「ㄨ」「ㄩ」，每次點選後進行聲調變化練習。</p>
        </div>

        <!-- 主要按鈕區域 -->
        <div class="flex justify-center gap-6 mb-8 flex-wrap">
            <button id="btn-i" class="bg-gradient-to-r from-pink-300 to-rose-400 hover:from-pink-400 hover:to-rose-500 text-white text-3xl font-bold py-4 px-8 rounded-2xl shadow-lg transform hover:scale-105 transition-all duration-200">
                ㄧ
            </button>
            <button id="btn-u" class="bg-gradient-to-r from-emerald-300 to-teal-400 hover:from-emerald-400 hover:to-teal-500 text-white text-3xl font-bold py-4 px-8 rounded-2xl shadow-lg transform hover:scale-105 transition-all duration-200">
                ㄨ
            </button>
            <button id="btn-yu" class="bg-gradient-to-r from-sky-300 to-blue-400 hover:from-sky-400 hover:to-blue-500 text-white text-3xl font-bold py-4 px-8 rounded-2xl shadow-lg transform hover:scale-105 transition-all duration-200">
                ㄩ
            </button>
        </div>

        <!-- 聲調按鈕 -->
        <div class="text-center mb-8">
            <button id="btn-tone" class="bg-gradient-to-r from-amber-300 to-yellow-400 hover:from-amber-400 hover:to-yellow-500 text-white text-xl font-bold py-3 px-6 rounded-xl shadow-lg transform hover:scale-105 transition-all duration-200 opacity-50 cursor-not-allowed" disabled>
                🎵 聲調變化
            </button>
        </div>

        <!-- 圖片顯示區域 -->
        <div class="flex justify-center mb-8">
            <div id="image-container" class="image-container bg-white rounded-2xl shadow-xl p-6 w-96 h-96 flex items-center justify-center">
                <div class="text-center text-slate-400">
                    <div class="text-6xl mb-4">🎼</div>
                    <p class="text-xl">請選擇一個注音符號開始學習</p>
                </div>
            </div>
        </div>


    </div>

    <script>
        // 注音結合韻數據
        const phoneticData = {
            'ㄧ': {
                'ㄧㄚ': {
                    1: 'https://github.com/genikid-ai/Curated/blob/main/Senior-01/E01-1.jpg?raw=true',
                    2: 'https://github.com/genikid-ai/Curated/blob/main/Senior-01/E01-2.jpg?raw=true',
                    3: 'https://github.com/genikid-ai/Curated/blob/main/Senior-01/E01-3.jpg?raw=true',
                    4: 'https://github.com/genikid-ai/Curated/blob/main/Senior-01/E01-4.jpg?raw=true'
                },
                'ㄧㄝ': {
                    1: 'https://github.com/genikid-ai/Curated/blob/main/Senior-01/E02-1.jpg?raw=true',
                    2: 'https://github.com/genikid-ai/Curated/blob/main/Senior-01/E02-2.jpg?raw=true',
                    3: 'https://github.com/genikid-ai/Curated/blob/main/Senior-01/E02-3.jpg?raw=true',
                    4: 'https://github.com/genikid-ai/Curated/blob/main/Senior-01/E02-4.jpg?raw=true'
                },
                'ㄧㄠ': {
                    1: 'https://github.com/genikid-ai/Curated/blob/main/Senior-01/E03-1.jpg?raw=true',
                    2: 'https://github.com/genikid-ai/Curated/blob/main/Senior-01/E03-2.jpg?raw=true',
                    3: 'https://github.com/genikid-ai/Curated/blob/main/Senior-01/E03-3.jpg?raw=true',
                    4: 'https://github.com/genikid-ai/Curated/blob/main/Senior-01/E03-4.jpg?raw=true'
                },
                'ㄧㄡ': {
                    1: 'https://github.com/genikid-ai/Curated/blob/main/Senior-01/E04-1.jpg?raw=true',
                    2: 'https://github.com/genikid-ai/Curated/blob/main/Senior-01/E04-2.jpg?raw=true',
                    3: 'https://github.com/genikid-ai/Curated/blob/main/Senior-01/E04-3.jpg?raw=true',
                    4: 'https://github.com/genikid-ai/Curated/blob/main/Senior-01/E04-4.jpg?raw=true'
                },
                'ㄧㄢ': {
                    1: 'https://github.com/genikid-ai/Curated/blob/main/Senior-01/E05-1.jpg?raw=true',
                    2: 'https://github.com/genikid-ai/Curated/blob/main/Senior-01/E05-2.jpg?raw=true',
                    3: 'https://github.com/genikid-ai/Curated/blob/main/Senior-01/E05-3.jpg?raw=true',
                    4: 'https://github.com/genikid-ai/Curated/blob/main/Senior-01/E05-4.jpg?raw=true'
                },
                'ㄧㄣ': {
                    1: 'https://github.com/genikid-ai/Curated/blob/main/Senior-01/E06-1.jpg?raw=true',
                    2: 'https://github.com/genikid-ai/Curated/blob/main/Senior-01/E06-2.jpg?raw=true',
                    3: 'https://github.com/genikid-ai/Curated/blob/main/Senior-01/E06-3.jpg?raw=true',
                    4: 'https://github.com/genikid-ai/Curated/blob/main/Senior-01/E06-4.jpg?raw=true'
                },
                'ㄧㄤ': {
                    1: 'https://github.com/genikid-ai/Curated/blob/main/Senior-01/E07-1.jpg?raw=true',
                    2: 'https://github.com/genikid-ai/Curated/blob/main/Senior-01/E07-2.jpg?raw=true',
                    3: 'https://github.com/genikid-ai/Curated/blob/main/Senior-01/E07-3.jpg?raw=true',
                    4: 'https://github.com/genikid-ai/Curated/blob/main/Senior-01/E07-4.jpg?raw=true'
                },
                'ㄧㄥ': {
                    1: 'https://github.com/genikid-ai/Curated/blob/main/Senior-01/E08-1.jpg?raw=true',
                    2: 'https://github.com/genikid-ai/Curated/blob/main/Senior-01/E08-2.jpg?raw=true',
                    3: 'https://github.com/genikid-ai/Curated/blob/main/Senior-01/E08-3.jpg?raw=true',
                    4: 'https://github.com/genikid-ai/Curated/blob/main/Senior-01/E08-4.jpg?raw=true'
                }
            },
            'ㄨ': {
                'ㄨㄚ': {
                    1: 'https://github.com/genikid-ai/Curated/blob/main/Senior-01/X01-1.jpg?raw=true',
                    2: 'https://github.com/genikid-ai/Curated/blob/main/Senior-01/X01-2.jpg?raw=true',
                    3: 'https://github.com/genikid-ai/Curated/blob/main/Senior-01/X01-3.jpg?raw=true',
                    4: 'https://github.com/genikid-ai/Curated/blob/main/Senior-01/X01-4.jpg?raw=true'
                },
                'ㄨㄛ': {
                    1: 'https://github.com/genikid-ai/Curated/blob/main/Senior-01/X02-1.jpg?raw=true',
                    3: 'https://github.com/genikid-ai/Curated/blob/main/Senior-01/X02-3.jpg?raw=true',
                    4: 'https://github.com/genikid-ai/Curated/blob/main/Senior-01/X02-4.jpg?raw=true'
                },
                'ㄨㄞ': {
                    1: 'https://github.com/genikid-ai/Curated/blob/main/Senior-01/X03-1.jpg?raw=true',
                    4: 'https://github.com/genikid-ai/Curated/blob/main/Senior-01/X03-4.jpg?raw=true'
                },
                'ㄨㄟ': {
                    1: 'https://github.com/genikid-ai/Curated/blob/main/Senior-01/X04-1.jpg?raw=true',
                    2: 'https://github.com/genikid-ai/Curated/blob/main/Senior-01/X04-2.jpg?raw=true',
                    3: 'https://github.com/genikid-ai/Curated/blob/main/Senior-01/X04-3.jpg?raw=true',
                    4: 'https://github.com/genikid-ai/Curated/blob/main/Senior-01/X04-4.jpg?raw=true'
                },
                'ㄨㄢ': {
                    1: 'https://github.com/genikid-ai/Curated/blob/main/Senior-01/X05-1.jpg?raw=true',
                    2: 'https://github.com/genikid-ai/Curated/blob/main/Senior-01/X05-2.jpg?raw=true',
                    3: 'https://github.com/genikid-ai/Curated/blob/main/Senior-01/X05-3.jpg?raw=true',
                    4: 'https://github.com/genikid-ai/Curated/blob/main/Senior-01/X05-4.jpg?raw=true'
                },
                'ㄨㄣ': {
                    1: 'https://github.com/genikid-ai/Curated/blob/main/Senior-01/X06-1.jpg?raw=true',
                    2: 'https://github.com/genikid-ai/Curated/blob/main/Senior-01/X06-2.jpg?raw=true',
                    3: 'https://github.com/genikid-ai/Curated/blob/main/Senior-01/X06-3.jpg?raw=true',
                    4: 'https://github.com/genikid-ai/Curated/blob/main/Senior-01/X06-4.jpg?raw=true'
                },
                'ㄨㄤ': {
                    1: 'https://github.com/genikid-ai/Curated/blob/main/Senior-01/X07-1.jpg?raw=true',
                    2: 'https://github.com/genikid-ai/Curated/blob/main/Senior-01/X07-2.jpg?raw=true',
                    3: 'https://github.com/genikid-ai/Curated/blob/main/Senior-01/X07-3.jpg?raw=true',
                    4: 'https://github.com/genikid-ai/Curated/blob/main/Senior-01/X07-4.jpg?raw=true'
                },
                'ㄨㄥ': {
                    1: 'https://github.com/genikid-ai/Curated/blob/main/Senior-01/X08-1.jpg?raw=true',
                    4: 'https://github.com/genikid-ai/Curated/blob/main/Senior-01/X08-4.jpg?raw=true'
                }
            },
            'ㄩ': {
                'ㄩㄝ': {
                    1: 'https://github.com/genikid-ai/Curated/blob/main/Senior-01/U01-1.jpg?raw=true',
                    4: 'https://github.com/genikid-ai/Curated/blob/main/Senior-01/U01-4.jpg?raw=true'
                },
                'ㄩㄢ': {
                    1: 'https://github.com/genikid-ai/Curated/blob/main/Senior-01/U02-1.jpg?raw=true',
                    2: 'https://github.com/genikid-ai/Curated/blob/main/Senior-01/U02-2.jpg?raw=true',
                    3: 'https://github.com/genikid-ai/Curated/blob/main/Senior-01/U02-3.jpg?raw=true',
                    4: 'https://github.com/genikid-ai/Curated/blob/main/Senior-01/U02-4.jpg?raw=true'
                },
                'ㄩㄣ': {
                    1: 'https://github.com/genikid-ai/Curated/blob/main/Senior-01/U03-1.jpg?raw=true',
                    2: 'https://github.com/genikid-ai/Curated/blob/main/Senior-01/U03-2.jpg?raw=true',
                    3: 'https://github.com/genikid-ai/Curated/blob/main/Senior-01/U03-3.jpg?raw=true',
                    4: 'https://github.com/genikid-ai/Curated/blob/main/Senior-01/U03-4.jpg?raw=true'
                },
                'ㄩㄥ': {
                    1: 'https://github.com/genikid-ai/Curated/blob/main/Senior-01/U04-1.jpg?raw=true',
                    3: 'https://github.com/genikid-ai/Curated/blob/main/Senior-01/U04-3.jpg?raw=true',
                    4: 'https://github.com/genikid-ai/Curated/blob/main/Senior-01/U04-4.jpg?raw=true'
                }
            }
        };

        let currentPhonetic = '';
        let currentCombination = '';
        let currentTone = 1;

        const imageContainer = document.getElementById('image-container');
        const toneButton = document.getElementById('btn-tone');

        // 聲調名稱對應
        const toneNames = {
            1: '一聲',
            2: '二聲',
            3: '三聲',
            4: '四聲'
        };

        // --- [新增] 禁用右鍵選單 ---
        document.addEventListener('contextmenu', event => {
            event.preventDefault();
        });

        // --- [新增] 全螢幕切換功能 ---
        const fullscreenBtn = document.getElementById('fullscreen-btn');
        const iconExpand = document.getElementById('icon-expand');
        const iconContract = document.getElementById('icon-contract');

        function toggleFullscreen() {
            if (!document.fullscreenElement && !document.webkitFullscreenElement) {
                // 進入全螢幕
                if (document.documentElement.requestFullscreen) {
                    document.documentElement.requestFullscreen();
                } else if (document.documentElement.webkitRequestFullscreen) { // Safari
                    document.documentElement.webkitRequestFullscreen();
                }
            } else {
                // 退出全螢幕
                if (document.exitFullscreen) {
                    document.exitFullscreen();
                } else if (document.webkitExitFullscreen) { // Safari
                    document.webkitExitFullscreen();
                }
            }
        }

        function updateFullscreenIcon() {
            if (!document.fullscreenElement && !document.webkitFullscreenElement) {
                // 不在全螢幕
                iconExpand.classList.remove('hidden');
                iconContract.classList.add('hidden');
            } else {
                // 在全螢幕
                iconExpand.classList.add('hidden');
                iconContract.classList.remove('hidden');
            }
        }

        fullscreenBtn.addEventListener('click', toggleFullscreen);
        
        // 監聽全螢幕狀態變化 (例如按 Esc 鍵)
        document.addEventListener('fullscreenchange', updateFullscreenIcon);
        document.addEventListener('webkitfullscreenchange', updateFullscreenIcon); // 兼容 Safari
        // --- [新增] 功能結束 ---


        // 顯示圖片
        function showImage(imageUrl, combination, tone) {
            // 先淡出當前內容
            imageContainer.style.opacity = '0.3';
            
            setTimeout(() => {
                imageContainer.innerHTML = `
                    <div class="fade-in w-full h-full flex items-center justify-center">
                        <img src="${imageUrl}" alt="${combination}${toneNames[tone]}" class="max-w-full max-h-full rounded-xl shadow-lg object-contain">
                    </div>
                `;
                // 淡入新內容
                imageContainer.style.opacity = '1';
            }, 150);
        }

        // 隨機選擇結合韻並顯示一聲
        function selectRandomCombination(phonetic) {
            const combinations = Object.keys(phoneticData[phonetic]);
            const randomCombination = combinations[Math.floor(Math.random() * combinations.length)];
            
            currentPhonetic = phonetic;
            currentCombination = randomCombination;
            currentTone = 1;
            
            // 重置已使用的聲調記錄
            usedTones = [];
            
            const imageUrl = phoneticData[phonetic][randomCombination][1];
            showImage(imageUrl, randomCombination, 1);
            
            // 啟用聲調按鈕
            toneButton.disabled = false;
            toneButton.classList.remove('opacity-50', 'cursor-not-allowed');
            toneButton.classList.add('pulse-button');
        }

        // 記錄已使用的聲調
        let usedTones = [];
        
        // 隨機選擇其他聲調（不重複直到全部用完）
        function selectRandomTone() {
            if (!currentPhonetic || !currentCombination) return;
            
            const allAvailableTones = Object.keys(phoneticData[currentPhonetic][currentCombination])
                .map(Number)
                .filter(tone => tone !== 1); // 排除一聲
            
            if (allAvailableTones.length === 0) {
                return;
            }
            
            // 找出還沒使用過的聲調
            let availableTones = allAvailableTones.filter(tone => !usedTones.includes(tone));
            
            // 如果所有聲調都用過了，重新開始
            if (availableTones.length === 0) {
                usedTones = [];
                availableTones = allAvailableTones;
            }
            
            const randomTone = availableTones[Math.floor(Math.random() * availableTones.length)];
            currentTone = randomTone;
            
            // 記錄已使用的聲調
            usedTones.push(randomTone);
            
            const imageUrl = phoneticData[currentPhonetic][currentCombination][randomTone];
            showImage(imageUrl, currentCombination, randomTone);
        }

        // 事件監聽器
        document.getElementById('btn-i').addEventListener('click', () => {
            selectRandomCombination('ㄧ');
        });

        document.getElementById('btn-u').addEventListener('click', () => {
            selectRandomCombination('ㄨ');
        });

        document.getElementById('btn-yu').addEventListener('click', () => {
            selectRandomCombination('ㄩ');
        });

        document.getElementById('btn-tone').addEventListener('click', () => {
            selectRandomTone();
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'995080fa527ff234',t:'MTc2MTU1MDM5MS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
